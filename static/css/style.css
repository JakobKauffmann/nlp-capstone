/* --- Catppuccin Theme Variables --- */
:root {
    /* --- Latte (Light Mode) --- */
    --ctp-latte-rosewater: #dc8a78;
    --ctp-latte-flamingo: #dd7878;
    --ctp-latte-pink: #ea76cb;
    --ctp-latte-mauve: #8839ef; /* Accent */
    --ctp-latte-red: #d20f39;
    --ctp-latte-maroon: #e64553;
    --ctp-latte-peach: #fe640b;
    --ctp-latte-yellow: #df8e1d;
    --ctp-latte-green: #40a02b;
    --ctp-latte-teal: #179299;
    --ctp-latte-sky: #04a5e5;
    --ctp-latte-sapphire: #209fb5;
    --ctp-latte-blue: #1e66f5;
    --ctp-latte-lavender: #7287fd;
    --ctp-latte-text: #4c4f69;
    --ctp-latte-subtext1: #5c5f77;
    --ctp-latte-subtext0: #6c6f85; /* Muted */
    --ctp-latte-overlay2: #7c7f93;
    --ctp-latte-overlay1: #8c8fa1;
    --ctp-latte-overlay0: #9ca0b0; /* Borders */
    --ctp-latte-surface2: #acb0be;
    --ctp-latte-surface1: #bcc0cc;
    --ctp-latte-surface0: #ccd0da; /* Input Background */
    --ctp-latte-base: #eff1f5; /* Background */
    --ctp-latte-mantle: #e6e9ef; /* Cards */
    --ctp-latte-crust: #dce0e8;

    /* --- Mocha (Dark Mode) --- */
    --ctp-mocha-rosewater: #f5e0dc;
    --ctp-mocha-flamingo: #f2cdcd;
    --ctp-mocha-pink: #f5c2e7;
    --ctp-mocha-mauve: #cba6f7; /* Accent */
    --ctp-mocha-red: #f38ba8;
    --ctp-mocha-maroon: #eba0ac;
    --ctp-mocha-peach: #fab387;
    --ctp-mocha-yellow: #f9e2af;
    --ctp-mocha-green: #a6e3a1;
    --ctp-mocha-teal: #94e2d5;
    --ctp-mocha-sky: #89dceb;
    --ctp-mocha-sapphire: #74c7ec;
    --ctp-mocha-blue: #89b4fa;
    --ctp-mocha-lavender: #b4befe;
    --ctp-mocha-text: #cdd6f4;
    --ctp-mocha-subtext1: #bac2de;
    --ctp-mocha-subtext0: #a6adc8; /* Muted */
    --ctp-mocha-overlay2: #9399b2;
    --ctp-mocha-overlay1: #7f849c;
    --ctp-mocha-overlay0: #6c7086;
    --ctp-mocha-surface2: #585b70;
    --ctp-mocha-surface1: #45475a; /* Borders */
    --ctp-mocha-surface0: #313244; /* Cards / Input Background */
    --ctp-mocha-base: #1e1e2e; /* Background */
    --ctp-mocha-mantle: #181825;
    --ctp-mocha-crust: #11111b;

    /* --- Theme Agnostic Variables --- */
    /* Light Mode Defaults */
    --bg: var(--ctp-latte-base);
    --card-bg: var(--ctp-latte-mantle);
    --input-bg: var(--ctp-latte-surface0); /* Specific for input */
    --text: var(--ctp-latte-text);
    --text-muted: var(--ctp-latte-subtext0);
    --border: var(--ctp-latte-overlay0);
    --accent: var(--ctp-latte-mauve);
    --accent-text: var(--ctp-latte-base);
    --chart-bg: var(--ctp-latte-crust);
    --tag-bg-light: var(--ctp-latte-surface1);
    --tag-text-light: var(--ctp-latte-subtext1);
    --tag-hover-bg-light: var(--ctp-latte-surface2);

    /* Default Font */
    font-family:
        ui-sans-serif,
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        "Helvetica Neue",
        Arial,
        "Noto Sans",
        sans-serif,
        "Apple Color Emoji",
        "Segoe UI Emoji",
        "Segoe UI Symbol",
        "Noto Color Emoji";
}

/* Apply dark mode variables when .dark class is present */
.dark {
    --bg: var(--ctp-mocha-base);
    --card-bg: var(--ctp-mocha-surface0);
    --input-bg: var(--ctp-mocha-surface0); /* Specific for input */
    --text: var(--ctp-mocha-text);
    --text-muted: var(--ctp-mocha-subtext0);
    --border: var(--ctp-mocha-surface1);
    --accent: var(--ctp-mocha-mauve);
    --accent-text: var(--ctp-mocha-base);
    --chart-bg: var(--ctp-mocha-mantle);
    --tag-bg-dark: var(--ctp-mocha-surface2);
    --tag-text-dark: var(--ctp-mocha-subtext1);
    --tag-hover-bg-dark: var(--ctp-mocha-overlay0);
}

/* Apply base theme variables */
body {
    background-color: var(--bg);
    color: var(--text);
    transition:
        background-color 0.2s ease-out,
        color 0.2s ease-out;
}

/* --- Layout & Core Elements Styling using Variables --- */

/* Sidebar Styles */
.sidebar {
    background-color: var(--card-bg);
    border-color: var(--border);
    transition: transform 0.3s ease-in-out;
}

/* Header Styles */
header {
    background-color: var(--card-bg);
    border-color: var(--border);
}

/* Main Content Area Background */
main {
    background-color: var(--bg);
}

/* Card Styles (Input, Loading, Error, Results containers) */
.analysis-page-card,
.result-card {
    background-color: var(--card-bg);
    border-color: var(--border);
    /* Apply Tailwind shadow/border/rounding in HTML */
}

/* --- Component Styling using Variables --- */

/* Input Type Buttons */
.input-type-btn {
    /* Use Tailwind classes in HTML for base style */
    transition:
        background-color 0.15s ease-in-out,
        color 0.15s ease-in-out;
}
.input-type-btn[aria-selected="true"] {
    background-color: var(--accent);
    color: var(--accent-text);
}
/* Base colors applied via Tailwind in HTML now */

/* Analysis Tabs */
.analysis-tab {
    border-bottom-width: 2px;
    border-color: transparent;
    color: var(--text-muted);
    transition:
        color 0.15s ease-in-out,
        border-color 0.15s ease-in-out;
}
.analysis-tab:hover {
    border-color: var(--border);
    color: var(--text);
}
.analysis-tab[aria-current="page"] {
    border-color: var(--accent);
    color: var(--accent);
}

/* History Item Links */
.history-item .group-hover\:text-blue-600 {
    /* Keep class name for now */
    transition: color 0.15s ease-in-out;
    color: var(--text);
}
.history-item:hover .group-hover\:text-blue-600 {
    color: var(--accent);
}

/* Recommended Search Tags */
#recommendedSearches span {
    display: inline-block;
    transition: background-color 0.15s ease-in-out;
    /* Base colors applied via Tailwind in HTML */
}
#recommendedSearches span:hover {
    /* Use Tailwind hover classes in HTML */
}

/* Plotly Chart Containers */
#sentimentChartContainer,
#biasChartContainer {
    min-height: 300px;
    background-color: var(--chart-bg);
    border: 1px solid var(--border);
    /* Apply Tailwind rounding in HTML */
}

/* --- Input Textarea Styling --- */
#contentInput {
    background-color: var(--input-bg);
    color: var(--text);
    border: 1px solid var(--border);
    transition:
        border-color 0.15s ease-in-out,
        box-shadow 0.15s ease-in-out;
    /* Apply Tailwind padding/rounding/width in HTML */
}
#contentInput::placeholder {
    color: var(--text-muted);
    opacity: 0.8;
}
#contentInput:focus {
    outline: none;
    border-color: var(--accent);
    /* Simulate Tailwind focus ring using box-shadow */
    box-shadow: 0 0 0 2px var(--accent);
    /* Adjust opacity if needed */
    /* box-shadow: 0 0 0 2px rgba(var(--accent-rgb, 136, 57, 239), 0.5); */
    /* Need to define --accent-rgb if using rgba */
}

/* --- Custom Styles & Overrides --- */

/* Pulse Animation */
.pulse-animation {
    animation: pulse 2s infinite;
}
@keyframes pulse {
    0%,
    100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.03);
        opacity: 0.95;
    }
}

/* Text Wrapping */
#contentSummary,
#analysisSource p {
    word-break: break-word;
    overflow-wrap: break-word;
}
#contentSummary {
    white-space: pre-wrap;
}

/* --- Badge Color Overrides (Using Catppuccin Palette) --- */
/* Using CSS variables for cleaner overrides */
:root {
    --badge-blue-bg: rgba(30, 102, 245, 0.1);
    --badge-blue-text: #1e66f5;
    --badge-red-bg: rgba(210, 15, 57, 0.1);
    --badge-red-text: #d20f39;
    --badge-yellow-bg: rgba(223, 142, 29, 0.1);
    --badge-yellow-text: #df8e1d;
    --badge-green-bg: rgba(64, 160, 43, 0.1);
    --badge-green-text: #40a02b;
    --badge-gray-bg: #bcc0cc;
    --badge-gray-text: #5c5f77;
}
.dark {
    --badge-blue-bg: rgba(137, 180, 250, 0.15);
    --badge-blue-text: #89b4fa;
    --badge-red-bg: rgba(243, 139, 168, 0.15);
    --badge-red-text: #f38ba8;
    --badge-yellow-bg: rgba(249, 226, 175, 0.15);
    --badge-yellow-text: #f9e2af;
    --badge-green-bg: rgba(166, 227, 161, 0.15);
    --badge-green-text: #a6e3a1;
    --badge-gray-bg: #45475a;
    --badge-gray-text: #a6adc8;
}

.bg-blue-100 {
    background-color: var(--badge-blue-bg) !important;
}
.text-blue-800 {
    color: var(--badge-blue-text) !important;
}
.bg-red-100 {
    background-color: var(--badge-red-bg) !important;
}
.text-red-800 {
    color: var(--badge-red-text) !important;
}
.bg-yellow-100 {
    background-color: var(--badge-yellow-bg) !important;
}
.text-yellow-800 {
    color: var(--badge-yellow-text) !important;
}
.bg-green-100 {
    background-color: var(--badge-green-bg) !important;
}
.text-green-800 {
    color: var(--badge-green-text) !important;
}
.bg-gray-100 {
    background-color: var(--badge-gray-bg) !important;
}
.text-gray-800 {
    color: var(--badge-gray-text) !important;
}

/* Ensure badge text is fully opaque */
[class*="text-blue-800"],
[class*="text-red-800"],
[class*="text-yellow-800"],
[class*="text-green-800"],
[class*="text-gray-800"] {
    opacity: 1 !important;
}

/* Specific Text Color Overrides */
.dark #biasIndicators p,
.dark #keyFindings li {
    color: var(--text);
}
.dark #biasIndicators p {
    background-color: var(--ctp-mocha-surface1);
    border-color: var(--border);
}
.dark .text-gray-700 {
    color: #d1d5db !important;
} /* gray-300 */
.dark .text-gray-500 {
    color: var(--text-muted) !important;
}
